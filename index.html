<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <title>Personal Crossword Puzzle üíï</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
            overflow-x: hidden;
            padding: 20px;
        }

        .game-container {
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
        }

        .game-title {
            font-size: clamp(2rem, 6vw, 3.5rem);
            font-weight: 700;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #ff6b6b, #feca57, #48dbfb);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientShift 3s ease-in-out infinite;
        }

        .game-subtitle {
            font-size: 1.2rem;
            margin-bottom: 30px;
            opacity: 0.9;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.4;
        }

        .puzzle-container {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 30px;
            margin-bottom: 30px;
            align-items: start;
        }

        .crossword-grid {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 30px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(15, 1fr);
            gap: 2px;
            max-width: 600px;
            margin: 0 auto 20px;
        }

        .cell {
            width: 35px;
            height: 35px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            position: relative;
            background: rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .cell.black {
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .cell.active {
            background: rgba(255, 255, 255, 0.3);
        }

        .cell input {
            width: 100%;
            height: 100%;
            border: none;
            background: transparent;
            text-align: center;
            font-size: 14px;
            font-weight: bold;
            color: white;
            text-transform: uppercase;
        }

        .cell input:focus {
            outline: 2px solid #feca57;
            background: rgba(254, 202, 87, 0.2);
        }

        .cell-number {
            position: absolute;
            top: 2px;
            left: 2px;
            font-size: 10px;
            color: #feca57;
            font-weight: bold;
        }

        .clues-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 25px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            text-align: left;
        }

        .clues-section {
            margin-bottom: 25px;
        }

        .clues-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #feca57;
            text-align: center;
        }

        .clue {
            margin-bottom: 8px;
            padding: 8px;
            border-radius: 8px;
            transition: background 0.3s ease;
            cursor: pointer;
        }

        .clue:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .clue.active {
            background: rgba(254, 202, 87, 0.2);
            border-left: 3px solid #feca57;
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .btn.primary {
            background: linear-gradient(135deg, #56ab2f, #a8e6cf);
        }

        .completion-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 40px;
            text-align: center;
            border: 2px solid rgba(255, 255, 255, 0.2);
            max-width: 500px;
            width: 90%;
            animation: modalAppear 0.8s ease-out;
        }

        .modal-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #ff6b6b, #feca57);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .modal-message {
            font-size: 1.2rem;
            margin-bottom: 30px;
            line-height: 1.4;
        }

        .modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .yes {
            background: linear-gradient(135deg, #56ab2f, #a8e6cf);
            animation: heartbeat 2s infinite;
        }

        .yes:hover {
            transform: scale(1.1);
            box-shadow: 0 15px 35px rgba(86, 171, 47, 0.4);
        }

        .no {
            background: linear-gradient(135deg, #ff6b6b, #ffa500);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #56ab2f, #a8e6cf);
            border-radius: 10px;
            transition: width 0.5s ease;
            width: 0%;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        @keyframes modalAppear {
            0% {
                opacity: 0;
                transform: scale(0.7) translateY(50px);
            }
            100% {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            14% { transform: scale(1.1); }
            28% { transform: scale(1); }
            42% { transform: scale(1.1); }
            70% { transform: scale(1); }
        }

        @media (max-width: 1000px) {
            .puzzle-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .cell {
                width: 25px;
                height: 25px;
                font-size: 12px;
            }
            
            .grid {
                max-width: 400px;
            }
        }

        @media (max-width: 600px) {
            .cell {
                width: 20px;
                height: 20px;
                font-size: 10px;
            }
            
            .grid {
                max-width: 320px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1 class="game-title">Personal Crossword Puzzle üíï</h1>
        <p class="game-subtitle">Solve this crossword about me to unlock a special message! Each clue reveals something personal about who I am.</p>
        
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        
        <div class="puzzle-container">
            <div class="crossword-grid">
                <div class="grid" id="crosswordGrid"></div>
                <div class="controls">
                    <button class="btn" onclick="game.giveHint()">üí° Hint</button>
                    <button class="btn" onclick="game.clearGrid()">üîÑ Clear</button>
                    <button class="btn primary" onclick="game.checkCompletion()">‚úì Check</button>
                </div>
            </div>
            
            <div class="clues-container">
                <div class="clues-section">
                    <div class="clues-title">üîç Across</div>
                    <div id="acrossClues"></div>
                </div>
                <div class="clues-section">
                    <div class="clues-title">üîç Down</div>
                    <div id="downClues"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Completion Modal -->
    <div class="completion-modal" id="completionModal">
        <div class="modal-content">
            <h2 class="modal-title">Amazing! üéâ</h2>
            <p class="modal-message">
                You know me so well! üíï<br><br>
                <strong>"Leila, just like this crossword, you complete me perfectly. Every clue led to you. Will you be my girlfriend?"</strong>
            </p>
            <div class="modal-buttons">
                <button class="btn yes" onclick="celebrateYes()">Yes! I'd love to! ‚ù§Ô∏è</button>
                <button class="btn no" onclick="showThinkingMessage()">Let me think about it üí≠</button>
            </div>
        </div>
    </div>

    <script>
        class PersonalCrossword {
            constructor() {
                this.gridSize = 15;
                this.currentDirection = 'across';
                this.currentClue = null;
                this.grid = Array(this.gridSize).fill().map(() => Array(this.gridSize).fill(null));
                this.hintsUsed = 0;
                
                // Define the crossword layout and answers
                this.words = {
                    // Across
                    1: { answer: 'ELDORET', start: [1, 4], direction: 'across', clue: 'My hometown, known for producing world-class runners' },
                    4: { answer: 'APPLE', start: [4, 2], direction: 'across', clue: 'My dream company to work for' },
                    6: { answer: 'PIXEL', start: [6, 5], direction: 'across', clue: 'American-owned phone brand that sells millions of units yearly' },
                    8: { answer: 'LONDON', start: [8, 1], direction: 'across', clue: 'My dream city to live in' },
                    10: { answer: 'SPACEX', start: [10, 4], direction: 'across', clue: 'Elon Musk\'s space company I admire' },
                    
                    // Down
                    2: { answer: 'COMPUTER', start: [2, 3], direction: 'down', clue: 'My field of study combined with Science' },
                    3: { answer: 'THURSDAY', start: [0, 8], direction: 'down', clue: 'The day of the week I was born' },
                    7: { answer: 'XIAOMI', start: [5, 7], direction: 'down', clue: 'Brand of my dream car model SU7' },
                    9: { answer: 'SPACE', start: [7, 9], direction: 'down', clue: 'What fascinates me beyond Earth' },
                    11: { answer: 'FOUR', start: [9, 12], direction: 'down', clue: 'Number of siblings in my family' }
                };
                
                this.init();
            }
            
            init() {
                this.createGrid();
                this.createClues();
                this.setupEventListeners();
                this.updateProgress();
            }
            
            createGrid() {
                const gridElement = document.getElementById('crosswordGrid');
                gridElement.innerHTML = '';
                
                // Initialize all cells as black
                for (let i = 0; i < this.gridSize * this.gridSize; i++) {
                    const row = Math.floor(i / this.gridSize);
                    const col = i % this.gridSize;
                    this.grid[row][col] = { type: 'black', letter: '', number: null };
                }
                
                // Mark word positions
                Object.entries(this.words).forEach(([num, word]) => {
                    const [startRow, startCol] = word.start;
                    for (let i = 0; i < word.answer.length; i++) {
                        const row = word.direction === 'across' ? startRow : startRow + i;
                        const col = word.direction === 'across' ? startCol + i : startCol;
                        
                        if (this.grid[row][col].type === 'black') {
                            this.grid[row][col] = { type: 'white', letter: '', number: null };
                        }
                        
                        // Add number to first cell
                        if (i === 0) {
                            this.grid[row][col].number = parseInt(num);
                        }
                    }
                });
                
                // Create DOM elements
                for (let row = 0; row < this.gridSize; row++) {
                    for (let col = 0; col < this.gridSize; col++) {
                        const cell = document.createElement('div');
                        cell.className = 'cell';
                        cell.dataset.row = row;
                        cell.dataset.col = col;
                        
                        if (this.grid[row][col].type === 'black') {
                            cell.classList.add('black');
                        } else {
                            const input = document.createElement('input');
                            input.maxLength = 1;
                            input.addEventListener('input', (e) => this.handleInput(e, row, col));
                            input.addEventListener('focus', () => this.handleFocus(row, col));
                            input.addEventListener('keydown', (e) => this.handleKeydown(e, row, col));
                            cell.appendChild(input);
                            
                            if (this.grid[row][col].number) {
                                const number = document.createElement('div');
                                number.className = 'cell-number';
                                number.textContent = this.grid[row][col].number;
                                cell.appendChild(number);
                            }
                        }
                        
                        gridElement.appendChild(cell);
                    }
                }
            }
            
            createClues() {
                const acrossClues = document.getElementById('acrossClues');
                const downClues = document.getElementById('downClues');
                
                acrossClues.innerHTML = '';
                downClues.innerHTML = '';
                
                Object.entries(this.words).forEach(([num, word]) => {
                    const clueElement = document.createElement('div');
                    clueElement.className = 'clue';
                    clueElement.dataset.number = num;
                    clueElement.dataset.direction = word.direction;
                    clueElement.innerHTML = `<strong>${num}.</strong> ${word.clue}`;
                    clueElement.addEventListener('click', () => this.selectClue(num, word.direction));
                    
                    if (word.direction === 'across') {
                        acrossClues.appendChild(clueElement);
                    } else {
                        downClues.appendChild(clueElement);
                    }
                });
            }
            
            handleInput(e, row, col) {
                const value = e.target.value.toUpperCase();
                this.grid[row][col].letter = value;
                
                if (value && this.currentClue) {
                    this.moveToNextCell(row, col);
                }
                
                this.updateProgress();
                this.checkCompletion();
            }
            
            handleFocus(row, col) {
                this.findAndSelectClue(row, col);
            }
            
            handleKeydown(e, row, col) {
                if (e.key === 'Backspace' && !e.target.value) {
                    this.moveToPreviousCell(row, col);
                } else if (e.key === 'Tab') {
                    e.preventDefault();
                    this.switchDirection();
                }
            }
            
            findAndSelectClue(row, col) {
                for (const [num, word] of Object.entries(this.words)) {
                    const [startRow, startCol] = word.start;
                    const endRow = word.direction === 'across' ? startRow : startRow + word.answer.length - 1;
                    const endCol = word.direction === 'across' ? startCol + word.answer.length - 1 : startCol;
                    
                    if (word.direction === 'across' && row === startRow && col >= startCol && col <= endCol) {
                        this.selectClue(num, 'across');
                        return;
                    } else if (word.direction === 'down' && col === startCol && row >= startRow && row <= endRow) {
                        this.selectClue(num, 'down');
                        return;
                    }
                }
            }
            
            selectClue(number, direction) {
                // Remove previous selection
                document.querySelectorAll('.clue.active').forEach(el => el.classList.remove('active'));
                document.querySelectorAll('.cell.active').forEach(el => el.classList.remove('active'));
                
                // Add new selection
                const clueElement = document.querySelector(`[data-number="${number}"][data-direction="${direction}"]`);
                if (clueElement) {
                    clueElement.classList.add('active');
                }
                
                this.currentClue = { number, direction };
                this.currentDirection = direction;
                
                // Highlight cells for this word
                const word = this.words[number];
                const [startRow, startCol] = word.start;
                for (let i = 0; i < word.answer.length; i++) {
                    const row = direction === 'across' ? startRow : startRow + i;
                    const col = direction === 'across' ? startCol + i : startCol;
                    const cell = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
                    if (cell) {
                        cell.classList.add('active');
                    }
                }
            }
            
            moveToNextCell(row, col) {
                if (!this.currentClue) return;
                
                const word = this.words[this.currentClue.number];
                const [startRow, startCol] = word.start;
                const direction = word.direction;
                
                const nextRow = direction === 'across' ? row : row + 1;
                const nextCol = direction === 'across' ? col + 1 : col;
                
                const nextCell = document.querySelector(`[data-row="${nextRow}"][data-col="${nextCol}"] input`);
                if (nextCell) {
                    nextCell.focus();
                }
            }
            
            moveToPreviousCell(row, col) {
                if (!this.currentClue) return;
                
                const word = this.words[this.currentClue.number];
                const direction = word.direction;
                
                const prevRow = direction === 'across' ? row : row - 1;
                const prevCol = direction === 'across' ? col - 1 : col;
                
                const prevCell = document.querySelector(`[data-row="${prevRow}"][data-col="${prevCol}"] input`);
                if (prevCell) {
                    prevCell.focus();
                }
            }
            
            switchDirection() {
                this.currentDirection = this.currentDirection === 'across' ? 'down' : 'across';
            }
            
            giveHint() {
                if (this.hintsUsed >= 3) {
                    alert('No more hints available! ü§î');
                    return;
                }
                
                const hintMessages = [
                    "üí° Think about personal details: my hometown, birth date, dreams, and interests!",
                    "üí° Consider technology I use, companies I admire, and places I want to visit!",
                    "üí° Remember: some answers are about my family, my studies, and things that fascinate me!"
                ];
                
                alert(hintMessages[this.hintsUsed] || hintMessages[0]);
                this.hintsUsed++;
            }
            
            clearGrid() {
                if (confirm('Are you sure you want to clear the entire grid?')) {
                    document.querySelectorAll('.cell input').forEach(input => {
                        input.value = '';
                    });
                    
                    for (let row = 0; row < this.gridSize; row++) {
                        for (let col = 0; col < this.gridSize; col++) {
                            if (this.grid[row][col].type === 'white') {
                                this.grid[row][col].letter = '';
                            }
                        }
                    }
                    
                    this.updateProgress();
                }
            }
            
            updateProgress() {
                let totalCells = 0;
                let filledCells = 0;
                
                for (let row = 0; row < this.gridSize; row++) {
                    for (let col = 0; col < this.gridSize; col++) {
                        if (this.grid[row][col].type === 'white') {
                            totalCells++;
                            if (this.grid[row][col].letter) {
                                filledCells++;
                            }
                        }
                    }
                }
                
                const progress = totalCells > 0 ? (filledCells / totalCells) * 100 : 0;
                document.getElementById('progressFill').style.width = progress + '%';
            }
            
            checkCompletion() {
                let allCorrect = true;
                
                Object.entries(this.words).forEach(([num, word]) => {
                    const [startRow, startCol] = word.start;
                    let currentWord = '';
                    
                    for (let i = 0; i < word.answer.length; i++) {
                        const row = word.direction === 'across' ? startRow : startRow + i;
                        const col = word.direction === 'across' ? startCol + i : startCol;
                        currentWord += this.grid[row][col].letter || '';
                    }
                    
                    if (currentWord !== word.answer) {
                        allCorrect = false;
                    }
                });
                
                if (allCorrect && this.isGridComplete()) {
                    setTimeout(() => {
                        document.getElementById('completionModal').style.display = 'flex';
                        this.createCelebration();
                    }, 500);
                }
            }
            
            isGridComplete() {
                for (let row = 0; row < this.gridSize; row++) {
                    for (let col = 0; col < this.gridSize; col++) {
                        if (this.grid[row][col].type === 'white' && !this.grid[row][col].letter) {
                            return false;
                        }
                    }
                }
                return true;
            }
            
            createCelebration() {
                const colors = ['#ff6b6b', '#feca57', '#48dbfb', '#ff9ff3', '#56ab2f'];
                for (let i = 0; i < 50; i++) {
                    setTimeout(() => {
                        const confetti = document.createElement('div');
                        confetti.style.position = 'fixed';
                        confetti.style.left = Math.random() * 100 + '%';
                        confetti.style.top = '-10px';
                        confetti.style.width = '10px';
                        confetti.style.height = '10px';
                        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                        confetti.style.pointerEvents = 'none';
                        confetti.style.zIndex = '999';
                        confetti.style.transform = 'rotate(' + Math.random() * 360 + 'deg)';
                        confetti.style.animation = 'confettiFall 3s linear forwards';
                        
                        document.body.appendChild(confetti);
                        setTimeout(() => confetti.remove(), 3000);
                    }, i * 50);
                }
            }
            
            setupEventListeners() {
                // Modal close functionality
                document.getElementById('completionModal').addEventListener('click', function(e) {
                    if (e.target === this) {
                        this.style.display = 'none';
                    }
                });
                
                // Keyboard shortcuts
                document.addEventListener('keydown', function(e) {
                    if (e.key === 'Escape' && document.getElementById('completionModal').style.display === 'flex') {
                        document.getElementById('completionModal').style.display = 'none';
                    }
                });
            }
        }

        // Initialize the game
        const game = new PersonalCrossword();

        // Global functions
        function celebrateYes() {
            const celebrations = ['üéâ', '‚ù§Ô∏è', 'üíï', 'üåü', 'üíñ', 'üéä', '‚ú®'];
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const celebration = document.createElement('div');
                    celebration.innerHTML = celebrations[Math.floor(Math.random() * celebrations.length)];
                    celebration.style.position = 'fixed';
                    celebration.style.left = Math.random() * 100 + '%';
                    celebration.style.top = Math.random() * 100 + '%';
                    celebration.style.fontSize = '3rem';
                    celebration.style.pointerEvents = 'none';
                    celebration.style.zIndex = '9999';
                    celebration.style.animation = 'celebrationBounce 3s ease-out forwards';
                    
                    document.body.appendChild(celebration);
                    setTimeout(() => celebration.remove(), 3000);
                }, i * 100);
            }
            
            setTimeout(() => {
                alert('üéâ‚ù§Ô∏è YES!!! This is the beginning of something amazing! I love you! ‚ù§Ô∏èüéâ');
            }, 2000);
        }

        function showThinkingMessage() {
            alert('Take all the time you need... but I hope you know how much you mean to me! üíï');
        }

        // Additional CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes confettiFall {
                0% {
                    transform: translateY(0) rotate(0deg);
                    opacity: 1;
                }
                100% {
                    transform: translateY(100vh) rotate(720deg);
                    opacity: 0;
                }
            }
            
            @keyframes celebrationBounce {
                0% {
                    opacity: 1;
                    transform: scale(1) rotate(0deg);
                }
                50% {
                    transform: scale(1.5) rotate(180deg);
                }
                100% {
                    opacity: 0;
                    transform: scale(2) rotate(360deg) translateY(-200px);
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
